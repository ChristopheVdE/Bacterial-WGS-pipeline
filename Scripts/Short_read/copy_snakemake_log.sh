#!/bin/bash

###################################################################################
#NAME SCRIPT: copy_log.sh
#AUTHOR: Christophe Van den Eynde  
#copying the snakemake log to a shared folder
#USAGE: ./copy_log.sh ${input} ${output}
###################################################################################

#FUNCTION--------------------------------------------------------------------------------------------------
usage() {
	errorcode=" \nERROR -> This script needs 1 parameters:\n
		1: Analysis type\n";
	echo ${errorcode};
	exit 1;
}
if [ "$#" -lt 1 ]; then
	usage
fi
echo
#-----------------------------------------------------------------------------------------------------------

#VARIABLES--------------------------------------------------------------------------------------------------
Analysis=$1
#-----------------------------------------------------------------------------------------------------------

#INPUT AND OUTPUT FOLDER------------------------------------------------------------------------------------
if Analysis == "short"; then
	folder = "/Short_reads"
elif Analysis == "hybrid"; then
	folder = "/Hybrid/Short_reads"
fi
#-----------------------------------------------------------------------------------------------------------

# SPECIFY VARIABLES-----------------------------------------------------------------------------------------
run="RUN_"`date +%Y%m%d`
#-----------------------------------------------------------------------------------------------------------

# COPY SNAKEMAKE LOG----------------------------------------------------------------------------------------
echo -e "\nCopying snakemake log, please wait"
mkdir -p /home/Pipeline/${folder}/Snakemake_logs/
cp -vr /home/Snakemake/.snakemake/log/* /home/Pipeline/${folder}/Snakemake_logs/ 
echo -e "Done\n"
#-----------------------------------------------------------------------------------------------------------